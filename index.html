<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Fermin & Laura · Acertijo Rojillo</title>
        <meta
            name="description"
            content="Juego de acertijos encadenados inspirado en Pamplona y Osasuna para celebrar la boda de Fermin y Laura."
        />
        <style>
            :root {
                --rojillo: #c40c2e; /* rojo Osasuna aprox */
                --azul: #0a2342; /* azul oscuro */
                --oro: #c9a227; /* acento dorado */
                --crema: #fff9f3;
                --ok: #22c55e; /* verde éxito */
                --warn: #f59e0b;
            }
            * {
                box-sizing: border-box;
            }
            html,
            body {
                height: 100%;
            }
            body {
                margin: 0;
                font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
                    Cantarell, "Noto Sans", "Helvetica Neue", Arial,
                    "Apple Color Emoji", "Segoe UI Emoji";
                color: #0f172a;
                /* Fondo con patrón sutil rojillo/azul */
                background: radial-gradient(
                        1200px 800px at 20% 10%,
                        #ffffff 0%,
                        #fafafa 45%,
                        #f3f4f6 100%
                    ),
                    linear-gradient(
                        135deg,
                        rgba(196, 12, 46, 0.08) 0%,
                        rgba(10, 35, 66, 0.08) 100%
                    );
            }

            /* ===== Encabezado hero ===== */
            header {
                position: relative;
                overflow: hidden;
                color: white;
                text-align: center;
                padding: 3.2rem 1.25rem 4.2rem;
                isolation: isolate;
                background: radial-gradient(
                        120% 140% at 10% -20%,
                        #e01e3f 0%,
                        var(--rojillo) 35%,
                        #8e0b22 70%
                    ),
                    linear-gradient(90deg, var(--azul), var(--rojillo));
            }
            /* ondas decorativas */
            header::after {
                content: "";
                position: absolute;
                inset: auto 0 0 0;
                height: 120px;
                z-index: -1;
                background: radial-gradient(
                    80% 100% at 50% 0%,
                    rgba(255, 255, 255, 0.35),
                    transparent 70%
                );
                filter: blur(20px);
            }
            .crest {
                display: inline-flex;
                align-items: center;
                gap: 0.6rem;
                padding: 0.35rem 0.65rem;
                border-radius: 999px;
                background: rgba(255, 255, 255, 0.12);
                border: 1px solid rgba(255, 255, 255, 0.25);
                font-weight: 700;
                letter-spacing: 0.3px;
                backdrop-filter: blur(6px);
            }
            .crest .dot {
                width: 0.55rem;
                height: 0.55rem;
                border-radius: 999px;
                background: var(--oro);
                box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.15) inset;
            }

            h1.hero {
                margin: 0.9rem 0 0;
                font-size: clamp(2rem, 3.8vw + 1rem, 3.6rem);
                letter-spacing: 0.5px;
                line-height: 1.05;
                font-weight: 900;
                text-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);
            }
            h1.hero .amp {
                color: var(--oro);
                font-weight: 900;
                padding: 0 0.25rem;
            }
            .sub {
                opacity: 0.95;
                margin-top: 0.5rem;
                font-size: clamp(0.95rem, 0.7vw + 0.6rem, 1.15rem);
            }

            main {
                max-width: 980px;
                margin: -2.2rem auto 3rem;
                padding: 0 1rem;
            }

            /* Tarjeta principal "glass" */
            .card {
                position: relative;
                background: linear-gradient(
                    180deg,
                    rgba(255, 255, 255, 0.85),
                    rgba(255, 255, 255, 0.92)
                );
                padding: 1.35rem;
                border-radius: 1.2rem;
                box-shadow: 0 18px 45px rgba(10, 35, 66, 0.12);
                border: 1px solid rgba(10, 35, 66, 0.08);
                backdrop-filter: blur(6px);
            }
            .card::before {
                content: "";
                position: absolute;
                inset: -1px;
                border-radius: 1.25rem;
                z-index: -1;
                background: linear-gradient(
                    135deg,
                    rgba(201, 162, 39, 0.45),
                    rgba(196, 12, 46, 0.35),
                    rgba(10, 35, 66, 0.35)
                );
                filter: blur(14px);
                opacity: 0.45;
            }

            .step {
                display: flex;
                align-items: flex-start;
                gap: 1rem;
                margin-bottom: 1rem;
            }
            .step .n {
                flex: 0 0 auto;
                width: 44px;
                height: 44px;
                display: grid;
                place-items: center;
                border-radius: 0.85rem;
                background: var(--azul);
                color: #fff;
                font-weight: 800;
                box-shadow: 0 6px 16px rgba(10, 35, 66, 0.28);
            }
            .step .txt {
                flex: 1;
            }
            .prompt {
                font-size: 1.15rem;
                line-height: 1.55;
            }
            .hint {
                font-size: 0.95rem;
                color: #4b5563;
            }

            .controls {
                display: flex;
                gap: 0.6rem;
                flex-wrap: wrap;
                margin-top: 0.9rem;
            }
            input[type="text"] {
                flex: 1;
                min-width: 260px;
                border: 2px solid #e4e7ec;
                border-radius: 0.85rem;
                padding: 0.85rem 1rem;
                font-size: 1rem;
                outline: none;
                transition: 0.18s border-color, 0.18s box-shadow;
                background: #fff;
            }
            input[type="text"]:focus {
                border-color: var(--rojillo);
                box-shadow: 0 0 0 5px rgba(196, 12, 46, 0.12);
            }
            button {
                border: 0;
                background: var(--rojillo);
                color: white;
                padding: 0.85rem 1.05rem;
                border-radius: 0.85rem;
                font-weight: 800;
                cursor: pointer;
                transition: 0.22s transform, 0.22s opacity, 0.22s background;
                letter-spacing: 0.2px;
                box-shadow: 0 6px 14px rgba(196, 12, 46, 0.25);
            }
            button.secondary {
                background: #f3f4f6;
                color: #111;
                box-shadow: none;
                border: 1px solid #e5e7eb;
            }
            button.ghost {
                background: transparent;
                border: 2px solid #e5e7eb;
                color: #111;
                box-shadow: none;
            }
            button:hover {
                transform: translateY(-2px);
            }

            .status {
                margin-top: 0.55rem;
                font-weight: 700;
            }
            .status.ok {
                color: var(--ok);
            }
            .status.bad {
                color: #dc2626;
            }

            .progress {
                margin: 1.1rem 0 0;
                background: #eef2f7;
                height: 12px;
                border-radius: 999px;
                overflow: hidden;
                border: 1px solid #e8eef6;
            }
            .bar {
                height: 100%;
                width: 0%;
                background: linear-gradient(90deg, var(--oro), var(--rojillo));
            }

            .final {
                display: none;
                text-align: center;
                padding: 2rem 1rem;
                border: 2px dashed #e6e6e6;
                border-radius: 1rem;
                background: var(--crema);
            }
            .final h2 {
                color: var(--azul);
            }
            .final .code {
                font-family: ui-monospace, Menlo, Consolas, monospace;
                font-size: 1.15rem;
                background: #fff;
                padding: 0.5rem 0.75rem;
                border-radius: 0.5rem;
                border: 1px solid #e5e5e5;
            }
            .muted {
                color: #6b7280;
            }

            footer {
                max-width: 980px;
                margin: 1rem auto 2.5rem;
                padding: 0 1rem;
                color: #6b7280;
                font-size: 0.92rem;
            }
            a {
                color: var(--azul);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }

            .chip {
                display: inline-block;
                background: #f1f5f9;
                border: 1px solid #e5e7eb;
                color: #0f172a;
                padding: 0.15rem 0.5rem;
                border-radius: 999px;
                font-size: 0.8rem;
            }
            /* Confetti and shake animations */
            .confetti-container {
                position: fixed;
                inset: 0;
                pointer-events: none;
                overflow: hidden;
            }
            .confetti {
                position: absolute;
                width: 8px;
                height: 8px;
                border-radius: 2px;
                opacity: 0;
                animation: confetti 1s linear forwards;
            }
            @keyframes confetti {
                from {
                    transform: translateY(-20px) rotate(0);
                    opacity: 1;
                }
                to {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
            .shake {
                animation: shake 0.4s;
            }
            @keyframes shake {
                0%,
                100% {
                    transform: translateX(0);
                }
                20%,
                60% {
                    transform: translateX(-8px);
                }
                40%,
                80% {
                    transform: translateX(8px);
                }
            }
        </style>
    </head>
    <body>
        <header>
            <div class="crest">
                <span class="dot"></span> ENHORABUENA PAREJA
            </div>
            <h1 class="hero">FERMÍN <span class="amp">&</span> LAURA</h1>
            <div class="sub">Acertijos de boda · Nueva vida juntos</div>
        </header>

        <main>
            <div class="card" id="app">
                <div id="introCard">
                    <p>
                        ¡Bienvenidos! Ya habéis disfrutado de un pequeño
                        adelanto del bote. Para llevaros el premio completo
                        deberéis resolver 11 acertijos y obtener un código
                        final. Cuando nos lo enviéis, el bote será vuestro.
                    </p>
                    <button id="btnStart">Comenzar</button>
                </div>

                <div id="riddleCard" style="display: none">
                    <div class="prompt" id="prompt">Cargando acertijo…</div>
                    <div class="hint" id="hint" style="display: none"></div>
                    <div class="controls">
                        <input
                            id="answer"
                            type="text"
                            placeholder="Escribe tu respuesta…"
                            autocomplete="off"
                        />
                        <button id="btnCheck">Comprobar</button>
                        <button id="btnHint">Pista (3)</button>
                        <button id="btnReset">Reiniciar</button>
                    </div>
                    <div class="status" id="status"></div>
                    <div class="progress"><div class="bar" id="bar"></div></div>
                    <div id="progressText">0/11</div>
                    <div class="final" id="final">
                        <h2>¡Todo resuelto! 🎉</h2>
                        <p>
                            Enhorabuena, mente brillante y corazón rojillo. Aquí
                            está tu código:
                        </p>
                        <p class="code" id="giftCode">OSASUNA-2025</p>
                        <button id="btnCopy">Copiar código</button>
                        <div id="copyMsg" class="status"></div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Celebrando el amor y la nueva aventura · Fermin & Laura</p>
        </footer>

        <script>
            function norm(s) {
                return s
                    .toString()
                    .trim()
                    .toLowerCase()
                    .normalize("NFD")
                    .replace(/\p{Diacritic}/gu, "")
                    .replace(/\s+/g, " ");
            }
            const RIDDLES = [
                {
                    prompt: "Soy un salón sin techo donde el tiempo toma café. Bajo mis portales conversan generaciones y en mi centro la ciudad se reconoce en un espejo invisible. Bancos, tertulias y pasos me pulen cada día. ¿Dónde estoy?",
                    answers: [
                        "plaza del castillo",
                        "plaza del castillo de pamplona",
                        "plaza del castillo pamplona",
                    ],
                    hints: [
                        "Me llaman el “salón” de la ciudad.",
                        "Cafés históricos custodian mis bordes.",
                        "Estoy a un par de pasos de Carlos III.",
                        "Aquí empiezan muchas quedadas.",
                        "He visto ferias, conciertos y manifestaciones.",
                        "Si eres de Pamplona, me dices por mi nombre propio.",
                    ],
                },
                {
                    prompt: "No soy recta y, aun así, soy carrera. Mis balcones son graderío, mis adoquines, escenario. Cada julio mi nombre suena en todo el planeta, pero el resto del año sigo siendo vecina y comercio. ¿Qué calle soy?",
                    answers: ["estafeta", "calle estafeta", "la estafeta"],
                    hints: [
                        "Famosa curva de una carrera muy particular.",
                        "Balcones estrechos, cámaras listas.",
                        "Entre Mercaderes y la Plaza de Toros tengo mi tramo más célebre.",
                        "Adoquín y madera conviven en mis fachadas.",
                        "Mi nombre aparece en portadas cada verano.",
                        "No soy avenida; soy tradición encajonada.",
                    ],
                },
                {
                    prompt: "Nací para la pólvora y vigilar la puerta de un reino. Hoy, en mi estrella de piedra, pasean familias, trotan perros y resuenan conciertos. Soy fortaleza que aprendió a ser parque. ¿Quién soy?",
                    answers: [
                        "ciudadela",
                        "la ciudadela",
                        "ciudadela de pamplona",
                    ],
                    hints: [
                        "Mi planta vista desde arriba dibuja una estrella.",
                        "Renacentista, de bastiones y fosos.",
                        "Ahora albergo arte, ferias y paseos.",
                        "Estoy muy cerca del centro, pero soy pulmón verde.",
                        "De cañones a columpios: cambié de oficio.",
                        "He sido cuartel y hoy soy descanso.",
                    ],
                },
                {
                    prompt: "Torres que miran viñedos, patios que huelen a corte. Soy un palacio que hizo de la piedra un cuento y del siglo, un recuerdo dorado. Entre almenas y pasadizos, aún susurra la realeza. ¿Dónde estoy?",
                    answers: [
                        "castillo de olite",
                        "palacio real de olite",
                        "olite",
                        "castillo-palacio de olite",
                    ],
                    hints: [
                        "Gótico y navarro me definen.",
                        "Mis jardines altos sorprendían a los viajeros.",
                        "A una hora aproximada de Pamplona.",
                        "Fui sede de reyes, no de condes.",
                        "Mis torres son miradores de viñas.",
                        "Mi silueta es postal obligada.",
                    ],
                },
                {
                    prompt: "Soy mar sin agua y océano de arcilla. El viento me esculpe, el silencio me gobierna. Quien me recorre escucha crujir la tierra y aprende a leer sombras. ¿Qué territorio atraviesas?",
                    answers: [
                        "bardenas reales",
                        "las bardenas reales",
                        "bardenas",
                        "bardena",
                    ],
                    hints: [
                        "Paisaje semidesértico singular en Navarra.",
                        "Castildetierra es mi icono fotogénico.",
                        "Rutas de BTT y 4x4 me trazan cicatrices.",
                        "Contrastes de blancos y ocres a cualquier hora.",
                        "No hay palmeras; hay cárcavas y badlands.",
                        "Me llaman también desierto de Navarra (aunque no lo soy estrictamente).",
                    ],
                },
                {
                    prompt: "Mis hayas hablan en susurros verdes y el otoño me escribe con tinta roja y cobre. Entre brumas y ríos, crezco silenciosa y enorme, como una catedral de árboles. ¿Qué bosque soy?",
                    answers: ["selva de irati", "irati", "bosque de irati"],
                    hints: [
                        "Hayedo-abetal de los mayores de Europa.",
                        "Entre los valles de Aezkoa y Salazar.",
                        "Ríos Irati y Urtxuria me acarician.",
                        "Senderos señalizados y pantanos cercanos.",
                        "En otoño me vuelvo un mosaico de colores.",
                        "Silencio, musgo y madera dibujan mi mapa.",
                    ],
                },
                {
                    prompt: "Un dibujo de concha me guía y un sello colecciono en mi cuaderno. Cruzo puentes, murallas y montes, entrando por la puerta de los Pirineos hacia el oeste infinito. ¿Qué ruta camino?",
                    answers: [
                        "camino de santiago",
                        "camino francés",
                        "camino de santiago navarra",
                        "camino frances",
                    ],
                    hints: [
                        "Roncesvalles/Orreaga es mi pórtico navarro.",
                        "La credencial pide tinta en cada etapa.",
                        "Puentes medievales y flechas amarillas.",
                        "Cruzo Pamplona de este a oeste.",
                        "Mi meta simbólica queda muy lejos, en Galicia.",
                        "Peregrinos de mil idiomas comparten senda.",
                    ],
                },
                {
                    prompt: "No soy catedral, pero trueno; no soy teatro, pero canto. Aquí el rojo tiene casa y el rival, respeto. He cambiado de rostro, pero mi voz es la misma. ¿Qué estadio soy?",
                    answers: [
                        "el sadar",
                        "sadar",
                        "estadio el sadar",
                        "estadio sadar",
                        "reyno de navarra",
                    ],
                    hints: [
                        "Aquí juega Osasuna como local.",
                        "Mi reforma reciente me dejó más vertical y ruidoso.",
                        "Mi césped conoce partidos de Primera y noches de copa.",
                        "Estoy en el barrio de Milagrosa/Arrosadía.",
                        "Mi apodo oficioso: la caldera rojilla.",
                        "Fui conocido un tiempo con nombre “real”.",
                    ],
                },
                {
                    prompt: "No es universidad y, sin embargo, forma maestros del balón. Entre campos verdes y madrugones, nacen rugidos con DNI rojillo. ¿Dónde aprende el cachorro a rugir antes de saltar al primer escenario?",
                    answers: [
                        "tajonar",
                        "ciudad deportiva de tajonar",
                        "instalaciones de tajonar",
                    ],
                    hints: [
                        "La cantera de Osasuna vive aquí.",
                        "Entrenamientos, residencias y formación.",
                        "De aquí salieron internacionales.",
                        "A pocos kilómetros de Pamplona.",
                        "Base de metodología y paciencia.",
                        "Escuela de identidad rojilla.",
                    ],
                },
                {
                    prompt: "Mi apellido suena a filo, pero corté sobre todo distancias. Llevé el brazal sin alzar la voz y marqué época con pasos firmes. ¿Qué capitán navarro te viene a la mente?",
                    answers: ["patxi puñal", "puñal", "francisco puñal"],
                    hints: [
                        "Centrocampista de trabajo y poso.",
                        "Muchos años vistiendo el rojo.",
                        "ADN Tajonar de principio a fin.",
                        "Capitán sobrio, referente en El Sadar.",
                        "Pamplonés, ejemplo de compromiso.",
                        "Su apellido parece arma, su juego fue temple.",
                    ],
                },
                {
                    prompt: "No soy muro, pero cierro la puerta; no soy campanario, pero mando por alto. De la tierra y del aire, vigilo cada centro. Llevo brazal y apellido común. ¿Quién es el central de la casa?",
                    answers: [
                        "david garcia",
                        "david garcía",
                        "david garcía zubiria",
                        "garcia",
                    ],
                    hints: [
                        "Canterano de Tajonar y capitán reciente.",
                        "Juego aéreo y colocación como bandera.",
                        "Internacional en listas de la selección.",
                        "Referencia defensiva de Osasuna en los últimos años.",
                        "Navarro, de perfil sobrio y eficaz.",
                        "Lidera sin estridencias, con ejemplo.",
                    ],
                },
            ];
            const FINAL_CODE = "OSASUNA-2025";
            const TOTAL_HINTS = 3;
            const STATE_KEY = "acertijo-boda-ferminlaura";
            let state = { idx: 0, hints: 0, attempts: [] };
            function save() {
                localStorage.setItem(STATE_KEY, JSON.stringify(state));
            }
            function load() {
                try {
                    const raw = localStorage.getItem(STATE_KEY);
                    if (raw) {
                        const s = JSON.parse(raw);
                        if (Number.isInteger(s.idx)) state.idx = s.idx;
                        if (Number.isInteger(s.hints)) state.hints = s.hints;
                        if (Array.isArray(s.attempts))
                            state.attempts = s.attempts;
                    }
                } catch (e) {}
            }
            function setProgress(i) {
                const pct = Math.min(
                    100,
                    Math.round((i / RIDDLES.length) * 100)
                );
                document.getElementById("bar").style.width = pct + "%";
                document.getElementById(
                    "progressText"
                ).textContent = `${i}/${RIDDLES.length}`;
            }
            function updateHintButton() {
                const btn = document.getElementById("btnHint");
                const rem = TOTAL_HINTS - state.hints;
                btn.textContent = rem > 0 ? `Pista (${rem})` : "Sin pistas";
                btn.disabled = rem <= 0;
            }
            function showRiddle() {
                const p = document.getElementById("prompt");
                const h = document.getElementById("hint");
                const s = document.getElementById("status");
                const ans = document.getElementById("answer");
                if (state.idx >= RIDDLES.length) {
                    setProgress(RIDDLES.length);
                    p.textContent = "¡Has completado todos los acertijos!";
                    h.style.display = "none";
                    document.getElementById("final").style.display = "block";
                    document.getElementById("giftCode").textContent =
                        FINAL_CODE;
                    const m = document.getElementById("copyMsg");
                    m.textContent = "";
                    m.className = "status";
                    ans.disabled = true;
                    const btnHint = document.getElementById("btnHint");
                    btnHint.disabled = true;
                    btnHint.textContent = "Sin pistas";
                    return;
                }
                const r = RIDDLES[state.idx];
                p.textContent = r.prompt;
                h.textContent = "💡 " + (r.hint || "");
                h.style.display = "none";
                s.textContent = "";
                ans.value = "";
                ans.disabled = false;
                setProgress(state.idx);
                ans.focus();
                updateHintButton();
            }
            function confetti() {
                const container = document.createElement("div");
                container.className = "confetti-container";
                for (let i = 0; i < 40; i++) {
                    const c = document.createElement("div");
                    c.className = "confetti";
                    c.style.left = Math.random() * 100 + "%";
                    c.style.backgroundColor = `hsl(${
                        Math.random() * 360
                    },100%,50%)`;
                    c.style.animationDelay = Math.random() * 0.5 + "s";
                    container.appendChild(c);
                }
                document.body.appendChild(container);
                setTimeout(() => container.remove(), 1000);
            }
            function failAnim() {
                const ans = document.getElementById("answer");
                ans.classList.add("shake");
                setTimeout(() => ans.classList.remove("shake"), 500);
            }
            function check() {
                const ansEl = document.getElementById("answer");
                const input = norm(ansEl.value);
                if (!input) return;
                const r = RIDDLES[state.idx];
                const ok = r.answers.some((a) => norm(a) === input);
                const s = document.getElementById("status");
                state.attempts.push({
                    idx: state.idx,
                    answer: input,
                    ok,
                    ts: Date.now(),
                });
                if (ok) {
                    s.className = "status ok";
                    s.textContent = "¡Correcto!";
                    confetti();
                    state.idx++;
                    save();
                    setTimeout(showRiddle, 700);
                } else {
                    s.className = "status bad";
                    s.textContent = "No es correcto.";
                    failAnim();
                    save();
                }
            }
            function hint() {
                if (state.hints >= TOTAL_HINTS) {
                    const s = document.getElementById("status");
                    s.className = "status bad";
                    s.textContent = "No quedan más pistas.";
                    return;
                }
                const r = RIDDLES[state.idx];
                if (!r.hint) {
                    const s = document.getElementById("status");
                    s.className = "status bad";
                    s.textContent = "Sin pista disponible.";
                    return;
                }
                document.getElementById("hint").style.display = "block";
                state.hints++;
                updateHintButton();
                save();
            }
            function resetAll() {
                state = { idx: 0, hints: 0, attempts: [] };
                save();
                showRiddle();
            }
            function copyCode() {
                navigator.clipboard.writeText(FINAL_CODE).then(() => {
                    const m = document.getElementById("copyMsg");
                    m.className = "status ok";
                    m.textContent = "Copiado al portapapeles";
                });
            }
            document
                .getElementById("btnCheck")
                .addEventListener("click", check);
            document.getElementById("btnHint").addEventListener("click", hint);
            document
                .getElementById("btnReset")
                .addEventListener("click", resetAll);
            document
                .getElementById("btnCopy")
                .addEventListener("click", copyCode);
            document.addEventListener("keydown", (e) => {
                if (e.key === "Enter") check();
            });
            function startGame() {
                document.getElementById("introCard").style.display = "none";
                document.getElementById("riddleCard").style.display = "block";
                showRiddle();
            }
            document
                .getElementById("btnStart")
                .addEventListener("click", startGame);
            load();
            updateHintButton();
        </script>
    </body>
</html>
